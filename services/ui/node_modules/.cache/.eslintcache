[{"/home/khalil/FYP_website/react_ui/src/index.js":"1","/home/khalil/FYP_website/react_ui/src/reportWebVitals.js":"2","/home/khalil/FYP_website/react_ui/src/App.js":"3","/home/khalil/FYP_website/react_ui/src/components/Chat/Chat.js":"4","/home/khalil/FYP_website/react_ui/src/components/Login/Login.js":"5","/home/khalil/FYP_website/react_ui/src/components/Register/Register.js":"6","/home/khalil/FYP_website/react_ui/src/context/auth.js":"7","/home/khalil/FYP_website/react_ui/src/components/Home/Home.js":"8","/home/khalil/FYP_website/react_ui/src/PrivateRoute.js":"9","/home/khalil/FYP_website/react_ui/src/components/AuthForm.js":"10","/home/khalil/FYP_website/react_ui/src/api-client.js":"11"},{"size":500,"mtime":1613493291101,"results":"12","hashOfConfig":"13"},{"size":362,"mtime":1613493291101,"results":"14","hashOfConfig":"13"},{"size":1022,"mtime":1614563045193,"results":"15","hashOfConfig":"13"},{"size":3759,"mtime":1614524772079,"results":"16","hashOfConfig":"13"},{"size":1361,"mtime":1614558072229,"results":"17","hashOfConfig":"13"},{"size":3057,"mtime":1614562426796,"results":"18","hashOfConfig":"13"},{"size":162,"mtime":1614530403990,"results":"19","hashOfConfig":"13"},{"size":107,"mtime":1614530289218,"results":"20","hashOfConfig":"13"},{"size":446,"mtime":1614563086417,"results":"21","hashOfConfig":"13"},{"size":893,"mtime":1614560256939,"results":"22","hashOfConfig":"13"},{"size":791,"mtime":1614562817692,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"gbrrkd",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"26"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/khalil/FYP_website/react_ui/src/index.js",[],["50","51"],"/home/khalil/FYP_website/react_ui/src/reportWebVitals.js",[],"/home/khalil/FYP_website/react_ui/src/App.js",["52","53"],"/home/khalil/FYP_website/react_ui/src/components/Chat/Chat.js",["54"],"import './Chat.css'\nimport 'react-chatbox-component/dist/style.css';\nimport React, { useState, useEffect } from \"react\";\nimport { ChatBox } from 'react-chatbox-component';\n\nconst Chat =()=> {\n  const CHATBOT_AVATAR_URL = \"https://images.idgesg.net/images/article/2018/02/artificial_intelligence_ai_virtual_assistant_robot_chatbot_thinkstock_856909876-100749925-large.jpg\"\n  const USER_AVATAR_URL = \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/OOjs_UI_icon_userAvatar-constructive.svg/1024px-OOjs_UI_icon_userAvatar-constructive.svg.png\"\n  const [messageHistory, setMessageHistory] = useState([])\n  const [ws, setWs] = useState(null)\n  const [wordClassifications, setWordClassifications] = useState([])\n  const currnetUser = {\n    \"uid\": \"user1\"\n  }\n\n  useEffect(() => {\n    let ws = new WebSocket(\"ws://localhost:8000/bot\");\n    ws.onopen = () => {\n      console.log(\"connected websocket main component\");\n      setWs(ws)\n    };\n    ws.onclose = e => {\n      console.log(\n        'Socket is closed.', e.reason\n      );\n    }\n  }, [])\n\n  if (ws) {\n    ws.onmessage = (event) => {\n      let botMsg = createFullMessage(event.data, 'chatbot', 'chatbot1', CHATBOT_AVATAR_URL)\n      updateChat(botMsg)\n    };\n  }\n\n  const createFullMessage = (text, name, uid, avatar_url) => {\n    return {\n      \"text\": text,\n      \"id\": messageHistory.length + 1,\n      \"sender\": {\n        \"name\": name,\n        \"uid\": uid,\n        \"avatar\": avatar_url,\n      },\n    }\n  }\n\n  const submitMessage = (text, name, uid, avatar_url) => {\n    requestClassification(text)\n    if (ws) {\n      ws.send(text)\n      let userMsg = createFullMessage(text, name, uid, avatar_url)\n      updateChat(userMsg)\n    }\n  }\n\n  const updateChat = (msg) => {\n    let newMessageHistory = messageHistory.concat([msg])\n    setMessageHistory(newMessageHistory)\n  }\n\n  const displayWordClassifications = () => {\n    return (\n      <div className='box'>\n        <h2>Word Breakdown</h2>\n        <ul style={{ listStyle: 'none', display: 'inline-block' }}>\n          {wordClassifications.map((classification, index) => {\n            return <li key={index}>word: {classification.word} level: {classification.level}</li>\n          })}\n        </ul>\n      </div>\n\n    )\n\n  }\n\n  const requestClassification = text => {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ message: text })\n    };\n    fetch('http://localhost:8001/classify', requestOptions)\n      .then(async response => {\n        const data = await response.json();\n        if (!response.ok) {\n          const error = (data && data.message) || response.status;\n          return Promise.reject(error);\n        }\n        let newWordClassifications = wordClassifications.concat(data)\n        const seen = new Set();\n        const filteredWordClassifications = newWordClassifications.filter(el => {\n          const duplicate = seen.has(el.word);\n          seen.add(el.word);\n          return !duplicate;\n        });\n        setWordClassifications(filteredWordClassifications)\n      })\n      .catch(error => {\n        console.error('Error:', error);\n      });\n  }\n\n  return (\n    <div className=\"chat\">\n      <h1>Chinese Chatbot</h1>\n      <div className='chat_items_container'>\n        <div className='box'>\n          <h2>Grammar Breakdown</h2>\n        </div>\n        <div className=\"box\">\n          <ChatBox\n            messages={messageHistory}\n            onSubmit={(newMsg) => submitMessage(newMsg, 'currentUser', \"user1\", USER_AVATAR_URL)}\n            isLoading={ws == null || ws.readyState == WebSocket.CLOSED}\n            user={currnetUser} />\n        </div>\n        {displayWordClassifications()}\n      </div>\n\n    </div>\n  );\n}\n\nexport default Chat;\n",["55","56"],"/home/khalil/FYP_website/react_ui/src/components/Login/Login.js",["57","58"],"import './Login.css'\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Logo, Form, Input, Button, Error } from '../AuthForm';\nimport logoImg from \"../../assets/logo.png\";\nimport { useAuth } from \"../../context/auth\";\nimport {postLogin} from '../../api-client'\n\nconst Login = ()=> {\n  // const [isLoggedIn, setLoggedIn] = useState(false);\n  const [errorText, setErrorText]= useState(\"\")\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  // const { setAuthTokens } = useAuth();\n  return(\n    <Card>\n      <Logo src={logoImg} />\n      <h2>请登录</h2>\n      <h2>(Please login)</h2>\n      <Form>\n        <Input \n          type=\"username\"\n          value={username}\n          onChange={e => {\n            setUsername(e.target.value);\n          }}\n          placeholder=\"Username\" \n        />\n        <Input \n          type=\"password\"\n          value={password}\n          onChange={e => {\n            setPassword(e.target.value);\n          }}\n          placeholder=\"Password\" \n        />\n        <Button onClick={()=>postLogin(username,password, setErrorText)}>登录(Sign In)</Button>\n      </Form>\n      <Link to=\"/register\">没有账户吗？ (Don't have an account?)</Link>\n      { errorText!=\"\" &&<Error>{errorText}</Error> }\n    </Card>\n  )\n}\n\nexport default Login","/home/khalil/FYP_website/react_ui/src/components/Register/Register.js",["59","60","61","62","63","64","65"],"/home/khalil/FYP_website/react_ui/src/context/auth.js",[],"/home/khalil/FYP_website/react_ui/src/components/Home/Home.js",[],"/home/khalil/FYP_website/react_ui/src/PrivateRoute.js",[],"/home/khalil/FYP_website/react_ui/src/components/AuthForm.js",[],"/home/khalil/FYP_website/react_ui/src/api-client.js",["66"],{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","severity":1,"message":"72","line":13,"column":10,"nodeType":"73","messageId":"74","endLine":13,"endColumn":20},{"ruleId":"71","severity":1,"message":"75","line":15,"column":9,"nodeType":"73","messageId":"74","endLine":15,"endColumn":18},{"ruleId":"76","severity":1,"message":"77","line":115,"column":52,"nodeType":"78","messageId":"79","endLine":115,"endColumn":54},{"ruleId":"67","replacedBy":"80"},{"ruleId":"69","replacedBy":"81"},{"ruleId":"71","severity":1,"message":"82","line":6,"column":10,"nodeType":"73","messageId":"74","endLine":6,"endColumn":17},{"ruleId":"76","severity":1,"message":"83","line":40,"column":18,"nodeType":"78","messageId":"79","endLine":40,"endColumn":20},{"ruleId":"76","severity":1,"message":"83","line":20,"column":21,"nodeType":"78","messageId":"79","endLine":20,"endColumn":23},{"ruleId":"76","severity":1,"message":"83","line":21,"column":18,"nodeType":"78","messageId":"79","endLine":21,"endColumn":20},{"ruleId":"76","severity":1,"message":"83","line":22,"column":21,"nodeType":"78","messageId":"79","endLine":22,"endColumn":23},{"ruleId":"76","severity":1,"message":"83","line":23,"column":21,"nodeType":"78","messageId":"79","endLine":23,"endColumn":23},{"ruleId":"76","severity":1,"message":"83","line":24,"column":29,"nodeType":"78","messageId":"79","endLine":24,"endColumn":31},{"ruleId":"76","severity":1,"message":"83","line":89,"column":20,"nodeType":"78","messageId":"79","endLine":89,"endColumn":22},{"ruleId":"76","severity":1,"message":"83","line":90,"column":22,"nodeType":"78","messageId":"79","endLine":90,"endColumn":24},{"ruleId":"76","severity":1,"message":"77","line":26,"column":25,"nodeType":"78","messageId":"79","endLine":26,"endColumn":27},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],"no-unused-vars","'authTokens' is assigned a value but never used.","Identifier","unusedVar","'setTokens' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected",["84"],["85"],"'useAuth' is defined but never used.","Expected '!==' and instead saw '!='.","no-global-assign","no-unsafe-negation"]